<?xml version="1.0" encoding="utf-8"?>
<beans>
  <bean name="template" type="com.cefriel.util.ChimeraResourceBean">
    <properties>
      <property key="url" value="classpath://template.vm"/>
      <property key="serializationFormat" value="vtl"/>
    </properties>
  </bean>
  <route>
    <from uri="file:./?fileName=student.json&amp;noop=true"/>
    <convertBodyTo type="java.lang.String"/>
    <setVariable name="readerFormat">
      <constant>json</constant>
    </setVariable>
    <setVariable name="readerName">
      <constant>idjhgcbjf</constant>
    </setVariable>
    <to uri="direct:aggregate"/>
  </route>
  <route>
    <from uri="file:./?fileName=sport.json&amp;noop=true"/>
    <convertBodyTo type="java.lang.String"/>
    <setVariable name="readerFormat">
      <constant>json</constant>
    </setVariable>
    <setVariable name="readerName">
      <constant>cgjfaeecf</constant>
    </setVariable>
    <to uri="direct:aggregate"/>
  </route>
  <route>
    <from uri="direct:aggregate"/>
    <!-- HARDCODED NAME OF AGGREGATIONS STRATEGY, DO NOT CHANGE -->
    <aggregate aggregationStrategy="#class:com.cefriel.ReadersAggregation" completionSize="2">
      <correlationExpression>
        <constant>true</constant>
      </correlationExpression>
      <to uri="mapt://readers?template=#bean:template"/>
      <to uri="graph://get?rdfFormat=nquads"/>
      <to uri="graph://dump?dumpFormat=nquads"/>
      <to uri="file:./?fileName=output.nq"/>
    </aggregate>
  </route>
</beans>
