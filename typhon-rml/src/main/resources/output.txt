

<beans>
  <bean name="template" type="com.cefriel.util.ChimeraResourceBean">
    <properties>
      <property key="url" value="classpath://template.vm"/>
      <property key="serializationFormat" value="vtl"></property>
    </properties>
  </bean>

  <route>
    

      
      
    <from uri="file:./?fileName=Friends.json&amp;noop=true"/>
    <convertBodyTo type="java.lang.String"/>

    <setVariable name="readerFormat">
      <constant>$inputMap[$source.ref_form]</constant>
    </setVariable>

    <setVariable name="readerName">
          <constant>bfcggbgifd</constant>
    </setVariable>

    <to uri="direct:aggregate"/>
  </route>

  <route>
  <from uri="direct:aggregate" />
  <!-- HARDCODED NAME OF AGGREGATIONS STRATEGY, DO NOT CHANGE -->
  <aggregate
  aggregationStrategy="#class:com.cefriel.ReadersAggregation"
  completionSize="1">
    <correlationExpression>
    <constant>true</constant>
    </correlationExpression>
        
    <to uri="mapt://readers?template=#bean:template"/>    
    <to uri="graph://get?rdfFormat=nquads"/>
    <to uri="graph://dump?dumpFormat=nquads"/>
    <to uri="file:./?fileName=output.nq"/>
    </aggregate>
 </route>

</beans>
